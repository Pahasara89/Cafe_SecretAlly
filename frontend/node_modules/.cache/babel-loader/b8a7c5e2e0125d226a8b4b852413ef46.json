{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Cafe_SecretAlly\\\\frontend\\\\src\\\\components\\\\Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FaTrashAlt } from 'react-icons/fa';\nimport { ADD_TO_CART } from '../redux/constants/cartConstants';\nimport { deleteFromCart } from \"../redux/actions/cartActions\";\nimport HomeNavBar from \"./HomeNavBar\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Cart = () => {\n  _s();\n\n  const {\n    cart\n  } = useSelector(state => state.cart);\n  const cartItems = [...cart];\n  const items = [];\n  const nItems = [];\n  const [products, setProducts] = useState([]);\n  const product = [...products];\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const [length, setLen] = useState(\"\");\n  const [total, setTotal] = useState(\"\");\n  useEffect(() => {\n    function setLength() {\n      var len = 0;\n      var tot = 0;\n\n      for (var i = 0; i < cart.length; i++) {\n        if ((userInfo === null || userInfo === void 0 ? void 0 : userInfo.name) == cart[i].userName) {\n          len = len + 1;\n          tot = tot + cart[i].price;\n        }\n      }\n\n      setLen(len);\n      setTotal(tot);\n    }\n\n    setLength();\n  }, [userInfo]);\n  useEffect(() => {\n    function getProducts() {\n      axios.get(\"http://localhost:5000/product/view\").then(res => {\n        setProducts(res.data);\n        console.log(res.data);\n      }).catch(err => {\n        alert(err.message);\n      });\n    }\n\n    getProducts();\n  }, []);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const handleGoBackBtn = () => {\n    navigate(-1);\n  };\n\n  const handleQtyChange = (e, product) => {\n    const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\n    cart.forEach(cartItem => {\n      if (cartItem._id === product._id) {\n        cartItem.count = e.target.value;\n      }\n    });\n    localStorage.setItem('cart', JSON.stringify(cart));\n    dispatch({\n      type: ADD_TO_CART,\n      payload: cart\n    });\n  };\n\n  const handleDeleteFromCart = product => {\n    dispatch(deleteFromCart(product));\n    window.location.reload();\n  };\n\n  const reduceQty = () => {\n    var n;\n    var j;\n    var ID;\n    var Quantity;\n\n    for (var i = 0; i < cartItems.length; i++) {\n      items[i] = cartItems[i].productName;\n      nItems[i] = cartItems[i].count;\n    }\n\n    for (n = 0; n < items.length; n++) {\n      for (j = 0; j < product.length; j++) {\n        if (items[n] == product[j].productName) {\n          Quantity = product[j].quantity - nItems[n];\n          ID = product[j]._id;\n        }\n      }\n\n      const updateQuantity = {\n        quantity: Quantity\n      };\n      axios.put(`http://localhost:5000/product/update/quantity/${ID}`, updateQuantity).then(() => {\n        navigate('/add-order');\n      }).catch(err => {\n        alert(err);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HomeNavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cart-page m-4\",\n      children: cart.length <= 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jumbotron\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"display-4\",\n          children: [\"Your Cart Is Empty\", /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-light text-primary backBtn\",\n            onClick: handleGoBackBtn,\n            children: \"Go Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-8\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Product\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 7\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 5\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 3\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: cart.map(product => {\n                  if ((userInfo === null || userInfo === void 0 ? void 0 : userInfo.name) == product.userName) {\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"row\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          style: {\n                            maxWidth: '110px'\n                          },\n                          className: \"img-fluid w=100 img-thumbnail\",\n                          src: \"http://localhost:5000/uploads/\" + product.image,\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 171,\n                          columnNumber: 13\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: product.productName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: product.price.toLocaleString('en-US', {\n                          style: 'currency',\n                          currency: 'USD'\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"number\",\n                          min: \"1\",\n                          max: product.quantity,\n                          value: product.count,\n                          onChange: e => handleQtyChange(e, product)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 13\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          className: \"btn btn-danger btn-sm\",\n                          onClick: () => handleDeleteFromCart(product),\n                          children: /*#__PURE__*/_jsxDEV(FaTrashAlt, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 202,\n                            columnNumber: 18\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 198,\n                          columnNumber: 13\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 197,\n                        columnNumber: 9\n                      }, this)]\n                    }, product._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 17\n                    }, this);\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 3\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 border-left pl-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Cart Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-weight-light text-muted border-bottom\",\n              children: cart.length === 1 ? '(1) Item' : `(${length}) Items`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-weight-bold\",\n              children: [\"Total: $\", total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: reduceQty,\n              className: \"btn btn-dark btn-large btn-block mb-5 py-2\",\n              children: \"Place an Order\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Cart, \"qxwvMVMbWhAaMZTbJDoAFwFZka4=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useNavigate];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/user/Desktop/Cafe_SecretAlly/frontend/src/components/Cart.js"],"names":["React","useState","useEffect","useSelector","useDispatch","useNavigate","FaTrashAlt","ADD_TO_CART","deleteFromCart","HomeNavBar","Link","axios","Cart","cart","state","cartItems","items","nItems","products","setProducts","product","userLogin","userInfo","length","setLen","total","setTotal","setLength","len","tot","i","name","userName","price","getProducts","get","then","res","data","console","log","catch","err","alert","message","dispatch","navigate","handleGoBackBtn","handleQtyChange","e","localStorage","getItem","JSON","parse","forEach","cartItem","_id","count","target","value","setItem","stringify","type","payload","handleDeleteFromCart","window","location","reload","reduceQty","n","j","ID","Quantity","productName","quantity","updateQuantity","put","map","maxWidth","image","toLocaleString","style","currency"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {FaTrashAlt} from 'react-icons/fa';\r\nimport {ADD_TO_CART} from '../redux/constants/cartConstants';\r\nimport { deleteFromCart } from \"../redux/actions/cartActions\";\r\nimport HomeNavBar from \"./HomeNavBar\";\r\nimport {Link} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Cart = () => {\r\n\r\n    const {cart} = useSelector(state => state.cart);\r\n    const cartItems = [...cart];\r\n    const items = [];\r\n    const nItems = [];\r\n\r\n    const [products,setProducts] = useState([]);\r\n    const product = [...products];\r\n\r\n    const userLogin = useSelector((state) => state.userLogin);\r\n    const { userInfo } = userLogin;\r\n\r\n    const [length,setLen] = useState(\"\");\r\n    const [total,setTotal] = useState(\"\");\r\n\r\n\r\n    useEffect(() => {\r\n        function setLength(){\r\n          var len = 0;\r\n          var tot = 0;\r\n  \r\n          for(var i=0; i<cart.length;i++){\r\n            if(userInfo?.name == cart[i].userName){\r\n              len = len + 1\r\n              tot = tot + cart[i].price\r\n            }\r\n          }\r\n          setLen(len)\r\n          setTotal(tot)\r\n        }\r\n  \r\n        setLength();\r\n  \r\n      }, [userInfo]);\r\n\r\n\r\n    useEffect(() =>{\r\n\r\n        function getProducts() {\r\n            axios.get(\"http://localhost:5000/product/view\").then((res) => {\r\n\r\n                setProducts(res.data);\r\n                console.log(res.data)\r\n            }).catch((err) => {\r\n\r\n                alert(err.message);\r\n            })\r\n        }\r\n\r\n        getProducts();\r\n\r\n    }, [])\r\n\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    const handleGoBackBtn = () => {\r\n        navigate(-1);\r\n    }\r\n\r\n    const handleQtyChange = (e,product) => {\r\n        const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n\r\n        cart.forEach(cartItem => {\r\n            if(cartItem._id === product._id) {\r\n                cartItem.count = e.target.value\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n\r\n        dispatch({\r\n            type: ADD_TO_CART,\r\n            payload: cart,\r\n        })\r\n\r\n    };\r\n\r\n    const handleDeleteFromCart = (product) => {\r\n        dispatch(deleteFromCart(product))\r\n        window.location.reload();\r\n    }\r\n\r\n\r\n    const reduceQty = () => {\r\n\r\n        var n;\r\n        var j;\r\n        var ID;\r\n        var Quantity;\r\n\r\n        for(var i=0; i<cartItems.length; i++){\r\n            items[i] = cartItems[i].productName\r\n            nItems[i] = cartItems[i].count\r\n        }\r\n\r\n        for(n=0; n<items.length; n++){\r\n            for(j=0; j<product.length; j++){\r\n                if(items[n] == product[j].productName){\r\n                    Quantity = product[j].quantity - nItems[n]\r\n                    ID = product[j]._id\r\n                    \r\n                }\r\n            }\r\n\t\t\r\n\t        const updateQuantity = {\r\n                quantity: Quantity,\r\n            }\r\n\r\n            axios.put(`http://localhost:5000/product/update/quantity/${ID}`,updateQuantity).then(() =>{\r\n                    navigate('/add-order')\r\n            }).catch((err) =>{\r\n                alert(err)\r\n            })\r\n        }\r\n\r\n        \r\n        \r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n                <HomeNavBar/>\r\n        <section className=\"cart-page m-4\">\r\n            {cart.length <= 0 ? (\r\n                <div className=\"jumbotron\">\r\n                    <h1 className=\"display-4\">Your Cart Is Empty \r\n                        <button\r\n                         className=\"btn btn-light text-primary backBtn\"\r\n                         onClick={handleGoBackBtn}>\r\n                            Go Back\r\n                        </button>\r\n                    </h1>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    \r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-8\">\r\n\r\n                        <table className=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th scope=\"col\"></th>\r\n      <th scope=\"col\">Product</th>\r\n      <th scope=\"col\">Price</th>\r\n      <th scope=\"col\">Quantity</th>\r\n      <th scope=\"col\">Remove</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {cart.map(product => {\r\n        if(userInfo?.name == product.userName){\r\n            return(\r\n                <tr key={product._id}>\r\n        <th scope=\"row\">\r\n            <img\r\n                style={{maxWidth: '110px',\r\n                }}  \r\n                className=\"img-fluid w=100 img-thumbnail\"\r\n                src={\"http://localhost:5000/uploads/\" + product.image}\r\n                alt=\"\"\r\n            />\r\n\r\n        </th>\r\n        <td>{product.productName}</td>\r\n        <td>{product.price.toLocaleString(\r\n            'en-US',\r\n            {\r\n                style: 'currency',\r\n                currency: 'USD',\r\n            }\r\n        )}\r\n        </td>\r\n        <td>\r\n            <input\r\n             type='number'\r\n             min='1'\r\n             max={product.quantity}\r\n             value={product.count}\r\n             onChange={e => handleQtyChange(e,product)}/>\r\n        </td>\r\n        <td>\r\n            <button\r\n             type=\"button\"\r\n             className=\"btn btn-danger btn-sm\"\r\n             onClick={() => handleDeleteFromCart(product)}>\r\n                 <FaTrashAlt/>\r\n            </button>\r\n        </td>\r\n      </tr>\r\n            )\r\n        }\r\n    })}\r\n\r\n\r\n    \r\n   \r\n  </tbody>\r\n</table>\r\n\r\n                    </div>\r\n                        <div className=\"col-md-4 border-left pl-4\">\r\n                            <h2>Cart Summary</h2>\r\n                            <p className=\"font-weight-light text-muted border-bottom\">{cart.length === 1 ? '(1) Item' : `(${length}) Items`}</p>\r\n\r\n                            <p className=\"font-weight-bold\">Total: ${total}</p>\r\n\r\n                            <button \r\n                                    onClick={reduceQty}\r\n                                    className='btn btn-dark btn-large btn-block mb-5 py-2'\r\n                                    \r\n                                    >\r\n                                        Place an Order\r\n                            </button>\r\n\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </section>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Cart;"]},"metadata":{},"sourceType":"module"}